# Задача: **PP 2.2.2.**

---

#### Тема: _10 Spring_
#### № **ITMPJ-2766**
#### Наименование: _Spring_
#### Дедлайн: _27/10/2024_
#### Код модуля: _PP2_

---
# Spring

## Условие:

Склонируйте заготовку проекта по [ссылке](https://github.com/VanderDT/Task-6).

На данном этапе начинается самое интересное: ваше приложение начнет получать запросы и возвращать ответы. 

Плюс к этому, мы создадим приложение, которое будет запускаться и управляться с помощью сервера `Tomcat`. 
_IDE_ поможет работать с ним без сложных консольных команд, что сильно облегчит разработку.

В этом приложении мы используем только зависимость `spring-webmvc`. Это не значит, что нам больше не нужны 
_бины_ или _контекст_, в данном случае _webmvc-фреймворк_ будет работать самостоятельно, 
так как любой фреймворк _Спринга_ содержит в себе `spring-core`.

В приложении появился новый пакет `controller`, в котором содержатся классы, держащие группы сервлетов - 
_контроллеры_. Данная технология позволит нам избежать создания большого количества сервлетов. 
_Контроллеры_ содержат методы, которые маппятся на разные `url` и `http`-методы, 
заменяя собой класс сервлета с методами `{{doGet, doPost }}` и т.д.

![Step1. Подключение модулей](/imgs/_thumb_01.png)

Для запуска приложения перейдите в `Project Structure` во вкладку `Modules`.

Выберите модуль `spring_mvc` и нажмите `“+”`. Далее следует выбрать модуль `Spring` и _IDEA_ сама подтянет 
класс-иницилайзер `WebConfig`, если это не произошло автоматически, то пропишите абсолютный путь на этот файл.

Аналогично нужно создать модуль `Web`, но в этом случае путь должен ссылаться на папку `webapp`.

Теперь обратимся к сборке проекта, в файл `{{pom.xml}}`:

![Step2. Добавление зависимостей](/imgs/_thumb_02.png)

Для правильной интерпретации структуры проекта требуется указать следующие параметры:

`failOnMissingWebXml}}` позволит нам запускать проект с помощью _маппинга_ контроллерами, без использования конфигурации в `{{{}web.xml`.

1. `warSourceDirectory}} `должен ссылаться на папку, содержащую `{{WEB-INF/`
2. В конфигурации `maven-compiler-plugin` явно нужно прописать версию _Java_.
3. Для запуска перейдите в конфигурацию сервера:

![Step3. Перейти в конфигурирование запуска](/imgs/_thumb_03.png)

Нажмите `edit`, затем `плюс` в левом верхнем углу и выберите `Tomcat Server` -> `Local Server`.

![Step4. Настроить конфигурацию запуска](/imgs/_thumb_04.png)

Настройте запуск приложения на свободный _порт_, выберите _дефолтный Tomcat_, измените адрес, 
который будет вызван после запуска, на `/`, так как в нашем приложении для этой страницы есть контроллер.

Далее следует настроить _артефакт_. Нажмите кнопку `Fix`, далее `«+»`, выберите артефакт 
с именем `“название проекта”`-`war exploded`.

После этого подтвердите изменения и запускайте приложение.

Ваш браузер откроется автоматически и вы увидите страницу приветствия.

Отдельное внимание стоит уделить тому, что в приложении нет метода `main`, его запуск происходит из-под _Tomcat_ 
и для этого требуется отдельный класс `AppInit`, который ссылается на _корневой конфигурационный файл_ 
и обозначает, на каком `url` будет находиться наше приложение.



## Задание:

1. Создайте еще один контроллер, замаппленный на `/cars`.
2. Создайте модель `Car` с тремя произвольными полями.
3. Создайте список из 5 машин.
4. Создайте сервис с методом, который будет возвращать указанное число машин из созданного списка.
5. Создайте страницу `cars.html`. Реализуйте создание таблицы с машинами из сервиса с помощью `thymeleaf`.
6. При запросе `/cars` выводить весь список. При запросе `/cars?count=2` должен отобразиться список из _2_ машин, 
при `/cars?count=3` - из _3_, и тд. При _count ≥ 5_ выводить _весь_ список машин..

![Step1. Подключение модулей](/imgs/1.png)
![Step2. Добавление зависимостей](/imgs/2.png)
![Step3. Перейти в конфигурирование запуска](/imgs/3.png)
![Step4. Настроить конфигурацию запуска](/imgs/4.png)

[Ссылка на оригинальную страницу](http://jira.it-mentor.tech/browse/ITMPJ-2766)